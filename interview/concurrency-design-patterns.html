<!DOCTYPE html>
<html lang="zh-CN" dir="ltr">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>å¹¶å‘è®¾è®¡æ¨¡å¼ | Yabin's Tech Journey</title>
    <meta name="description" content="ç®—æ³•ã€javaã€AI">
    <meta name="generator" content="VitePress v1.6.3">
    <link rel="preload stylesheet" href="/assets/style.T87138lQ.css" as="style">
    <link rel="preload stylesheet" href="/vp-icons.css" as="style">
    
    <script type="module" src="/assets/app.CrWhcqTx.js"></script>
    <link rel="preload" href="/assets/inter-roman-latin.Di8DUHzh.woff2" as="font" type="font/woff2" crossorigin="">
    <link rel="modulepreload" href="/assets/chunks/theme.D6KX6WHB.js">
    <link rel="modulepreload" href="/assets/chunks/framework.DK1-H3E1.js">
    <link rel="modulepreload" href="/assets/interview_concurrency-design-patterns.md.DxnsdowV.lean.js">
    <meta name="keywords" content="æŠ€æœ¯åšå®¢,ç®—æ³•,ç³»ç»Ÿè®¾è®¡,æ•°æ®åº“,LeetCode">
    <meta name="author" content="Wang Yabin">
    <meta property="og:title" content="Yabin's Tech Journey">
    <meta property="og:description" content="æŠ€æœ¯æ¢ç´¢è€…çš„åšå®¢ - åˆ†äº«ç®—æ³•ã€ç³»ç»Ÿè®¾è®¡ä¸å·¥ç¨‹å®è·µ">
    <script src="/password-protect.js"></script>
    <script>(function(){document.documentElement.classList.add("dark"),localStorage.setItem("vitepress-theme-appearance","dark")})();</script>
    <script id="check-mac-os">document.documentElement.classList.toggle("mac",/Mac|iPhone|iPod|iPad/i.test(navigator.platform));</script>
  </head>
  <body>
    <div id="app"><div class="Layout" data-v-5d98c3a5><!--[--><!--]--><!--[--><span tabindex="-1" data-v-0b0ada53></span><a href="#VPContent" class="VPSkipLink visually-hidden" data-v-0b0ada53>Skip to content</a><!--]--><!----><header class="VPNav" data-v-5d98c3a5 data-v-ae24b3ad><div class="VPNavBar" data-v-ae24b3ad data-v-6aa21345><div class="wrapper" data-v-6aa21345><div class="container" data-v-6aa21345><div class="title" data-v-6aa21345><div class="VPNavBarTitle has-sidebar" data-v-6aa21345 data-v-1168a8e4><a class="title" href="/" data-v-1168a8e4><!--[--><!--]--><!----><span data-v-1168a8e4>Yabin's Tech Journey</span><!--[--><!--]--></a></div></div><div class="content" data-v-6aa21345><div class="content-body" data-v-6aa21345><!--[--><!--]--><div class="VPNavBarSearch search" data-v-6aa21345><!--[--><!----><div id="local-search"><button type="button" class="DocSearch DocSearch-Button" aria-label="Search"><span class="DocSearch-Button-Container"><span class="vp-icon DocSearch-Search-Icon"></span><span class="DocSearch-Button-Placeholder">Search</span></span><span class="DocSearch-Button-Keys"><kbd class="DocSearch-Button-Key"></kbd><kbd class="DocSearch-Button-Key">K</kbd></span></button></div><!--]--></div><nav aria-labelledby="main-nav-aria-label" class="VPNavBarMenu menu" data-v-6aa21345 data-v-dc692963><span id="main-nav-aria-label" class="visually-hidden" data-v-dc692963> Main Navigation </span><!--[--><!--[--><a class="VPLink link VPNavBarMenuLink" href="/30-day-algorithm/" tabindex="0" data-v-dc692963 data-v-e56f3d57><!--[--><span data-v-e56f3d57>ğŸš€ 30å¤©åˆ·é¢˜è®¡åˆ’</span><!--]--></a><!--]--><!--[--><a class="VPLink link VPNavBarMenuLink" href="/interview/" tabindex="0" data-v-dc692963 data-v-e56f3d57><!--[--><span data-v-e56f3d57>â˜• Java é¢è¯•</span><!--]--></a><!--]--><!--[--><a class="VPLink link VPNavBarMenuLink" href="/ai/" tabindex="0" data-v-dc692963 data-v-e56f3d57><!--[--><span data-v-e56f3d57>ğŸ¤– AI æ¢ç´¢</span><!--]--></a><!--]--><!--[--><a class="VPLink link VPNavBarMenuLink" href="/others/" tabindex="0" data-v-dc692963 data-v-e56f3d57><!--[--><span data-v-e56f3d57>ğŸ“ å…¶ä»–æ–‡ç« </span><!--]--></a><!--]--><!--]--></nav><!----><!----><div class="VPSocialLinks VPNavBarSocialLinks social-links" data-v-6aa21345 data-v-0394ad82 data-v-7bc22406><!--[--><a class="VPSocialLink no-icon" href="https://github.com/yabwang" aria-label="github" target="_blank" rel="noopener" data-v-7bc22406 data-v-bd121fe5><span class="vpi-social-github"></span></a><!--]--></div><div class="VPFlyout VPNavBarExtra extra" data-v-6aa21345 data-v-bb2aa2f0 data-v-cf11d7a2><button type="button" class="button" aria-haspopup="true" aria-expanded="false" aria-label="extra navigation" data-v-cf11d7a2><span class="vpi-more-horizontal icon" data-v-cf11d7a2></span></button><div class="menu" data-v-cf11d7a2><div class="VPMenu" data-v-cf11d7a2 data-v-b98bc113><!----><!--[--><!--[--><!----><!----><div class="group" data-v-bb2aa2f0><div class="item social-links" data-v-bb2aa2f0><div class="VPSocialLinks social-links-list" data-v-bb2aa2f0 data-v-7bc22406><!--[--><a class="VPSocialLink no-icon" href="https://github.com/yabwang" aria-label="github" target="_blank" rel="noopener" data-v-7bc22406 data-v-bd121fe5><span class="vpi-social-github"></span></a><!--]--></div></div></div><!--]--><!--]--></div></div></div><!--[--><!--]--><button type="button" class="VPNavBarHamburger hamburger" aria-label="mobile navigation" aria-expanded="false" aria-controls="VPNavScreen" data-v-6aa21345 data-v-e5dd9c1c><span class="container" data-v-e5dd9c1c><span class="top" data-v-e5dd9c1c></span><span class="middle" data-v-e5dd9c1c></span><span class="bottom" data-v-e5dd9c1c></span></span></button></div></div></div></div><div class="divider" data-v-6aa21345><div class="divider-line" data-v-6aa21345></div></div></div><!----></header><div class="VPLocalNav has-sidebar empty" data-v-5d98c3a5 data-v-a6f0e41e><div class="container" data-v-a6f0e41e><button class="menu" aria-expanded="false" aria-controls="VPSidebarNav" data-v-a6f0e41e><span class="vpi-align-left menu-icon" data-v-a6f0e41e></span><span class="menu-text" data-v-a6f0e41e>Menu</span></button><div class="VPLocalNavOutlineDropdown" style="--vp-vh:0px;" data-v-a6f0e41e data-v-8a42e2b4><button data-v-8a42e2b4>Return to top</button><!----></div></div></div><aside class="VPSidebar" data-v-5d98c3a5 data-v-319d5ca6><div class="curtain" data-v-319d5ca6></div><nav class="nav" id="VPSidebarNav" aria-labelledby="sidebar-aria-label" tabindex="-1" data-v-319d5ca6><span class="visually-hidden" id="sidebar-aria-label" data-v-319d5ca6> Sidebar Navigation </span><!--[--><!--]--><!--[--><div class="no-transition group" data-v-c40bc020><section class="VPSidebarItem level-0" data-v-c40bc020 data-v-b3fd67f8><!----><div class="items" data-v-b3fd67f8><!--[--><div class="VPSidebarItem level-1 is-link" data-v-b3fd67f8 data-v-b3fd67f8><div class="item" data-v-b3fd67f8><div class="indicator" data-v-b3fd67f8></div><a class="VPLink link link" href="/interview/java-interview-outline.html" data-v-b3fd67f8><!--[--><p class="text" data-v-b3fd67f8>Javaç¨‹åºå‘˜é¢è¯•å­¦ä¹ å¤§çº²</p><!--]--></a><!----></div><!----></div><div class="VPSidebarItem level-1 is-link" data-v-b3fd67f8 data-v-b3fd67f8><div class="item" data-v-b3fd67f8><div class="indicator" data-v-b3fd67f8></div><a class="VPLink link link" href="/interview/" data-v-b3fd67f8><!--[--><p class="text" data-v-b3fd67f8>â˜• Java é¢è¯•å­¦ä¹ </p><!--]--></a><!----></div><!----></div><!--]--></div></section></div><div class="no-transition group" data-v-c40bc020><section class="VPSidebarItem level-0 collapsible" data-v-c40bc020 data-v-b3fd67f8><div class="item" role="button" tabindex="0" data-v-b3fd67f8><div class="indicator" data-v-b3fd67f8></div><h2 class="text" data-v-b3fd67f8>JavaåŸºç¡€</h2><div class="caret" role="button" aria-label="toggle section" tabindex="0" data-v-b3fd67f8><span class="vpi-chevron-right caret-icon" data-v-b3fd67f8></span></div></div><div class="items" data-v-b3fd67f8><!--[--><div class="VPSidebarItem level-1 is-link" data-v-b3fd67f8 data-v-b3fd67f8><div class="item" data-v-b3fd67f8><div class="indicator" data-v-b3fd67f8></div><a class="VPLink link link" href="/interview/java-basics-language-features.html" data-v-b3fd67f8><!--[--><p class="text" data-v-b3fd67f8>è¯­è¨€ç‰¹æ€§</p><!--]--></a><!----></div><!----></div><div class="VPSidebarItem level-1 is-link" data-v-b3fd67f8 data-v-b3fd67f8><div class="item" data-v-b3fd67f8><div class="indicator" data-v-b3fd67f8></div><a class="VPLink link link" href="/interview/java-basics-collections.html" data-v-b3fd67f8><!--[--><p class="text" data-v-b3fd67f8>é›†åˆæ¡†æ¶</p><!--]--></a><!----></div><!----></div><div class="VPSidebarItem level-1 is-link" data-v-b3fd67f8 data-v-b3fd67f8><div class="item" data-v-b3fd67f8><div class="indicator" data-v-b3fd67f8></div><a class="VPLink link link" href="/interview/java-basics-io-nio.html" data-v-b3fd67f8><!--[--><p class="text" data-v-b3fd67f8>IO/NIO</p><!--]--></a><!----></div><!----></div><!--]--></div></section></div><div class="no-transition group" data-v-c40bc020><section class="VPSidebarItem level-0 collapsible has-active" data-v-c40bc020 data-v-b3fd67f8><div class="item" role="button" tabindex="0" data-v-b3fd67f8><div class="indicator" data-v-b3fd67f8></div><h2 class="text" data-v-b3fd67f8>å¹¶å‘ç¼–ç¨‹</h2><div class="caret" role="button" aria-label="toggle section" tabindex="0" data-v-b3fd67f8><span class="vpi-chevron-right caret-icon" data-v-b3fd67f8></span></div></div><div class="items" data-v-b3fd67f8><!--[--><div class="VPSidebarItem level-1 is-link" data-v-b3fd67f8 data-v-b3fd67f8><div class="item" data-v-b3fd67f8><div class="indicator" data-v-b3fd67f8></div><a class="VPLink link link" href="/interview/concurrency-thread-basics.html" data-v-b3fd67f8><!--[--><p class="text" data-v-b3fd67f8>çº¿ç¨‹åŸºç¡€</p><!--]--></a><!----></div><!----></div><div class="VPSidebarItem level-1 is-link" data-v-b3fd67f8 data-v-b3fd67f8><div class="item" data-v-b3fd67f8><div class="indicator" data-v-b3fd67f8></div><a class="VPLink link link" href="/interview/concurrency-juc.html" data-v-b3fd67f8><!--[--><p class="text" data-v-b3fd67f8>JUCåŒ…</p><!--]--></a><!----></div><!----></div><div class="VPSidebarItem level-1 is-link" data-v-b3fd67f8 data-v-b3fd67f8><div class="item" data-v-b3fd67f8><div class="indicator" data-v-b3fd67f8></div><a class="VPLink link link" href="/interview/concurrency-design-patterns.html" data-v-b3fd67f8><!--[--><p class="text" data-v-b3fd67f8>å¹¶å‘è®¾è®¡æ¨¡å¼</p><!--]--></a><!----></div><!----></div><!--]--></div></section></div><div class="no-transition group" data-v-c40bc020><section class="VPSidebarItem level-0 collapsible" data-v-c40bc020 data-v-b3fd67f8><div class="item" role="button" tabindex="0" data-v-b3fd67f8><div class="indicator" data-v-b3fd67f8></div><h2 class="text" data-v-b3fd67f8>JVM</h2><div class="caret" role="button" aria-label="toggle section" tabindex="0" data-v-b3fd67f8><span class="vpi-chevron-right caret-icon" data-v-b3fd67f8></span></div></div><div class="items" data-v-b3fd67f8><!--[--><div class="VPSidebarItem level-1 is-link" data-v-b3fd67f8 data-v-b3fd67f8><div class="item" data-v-b3fd67f8><div class="indicator" data-v-b3fd67f8></div><a class="VPLink link link" href="/interview/jvm-basics.html" data-v-b3fd67f8><!--[--><p class="text" data-v-b3fd67f8>å†…å­˜æ¨¡å‹ã€GCä¸ç±»åŠ è½½</p><!--]--></a><!----></div><!----></div><!--]--></div></section></div><!--]--><!--[--><!--]--></nav></aside><div class="VPContent has-sidebar" id="VPContent" data-v-5d98c3a5 data-v-1428d186><div class="VPDoc has-sidebar has-aside" data-v-1428d186 data-v-39a288b8><!--[--><!--]--><div class="container" data-v-39a288b8><div class="aside" data-v-39a288b8><div class="aside-curtain" data-v-39a288b8></div><div class="aside-container" data-v-39a288b8><div class="aside-content" data-v-39a288b8><div class="VPDocAside" data-v-39a288b8 data-v-3f215769><!--[--><!--]--><!--[--><!--]--><nav aria-labelledby="doc-outline-aria-label" class="VPDocAsideOutline" data-v-3f215769 data-v-a5bbad30><div class="content" data-v-a5bbad30><div class="outline-marker" data-v-a5bbad30></div><div aria-level="2" class="outline-title" id="doc-outline-aria-label" role="heading" data-v-a5bbad30>ç›®å½•</div><ul class="VPDocOutlineItem root" data-v-a5bbad30 data-v-b933a997><!--[--><!--]--></ul></div></nav><!--[--><!--]--><div class="spacer" data-v-3f215769></div><!--[--><!--]--><!----><!--[--><!--]--><!--[--><!--]--></div></div></div></div><div class="content" data-v-39a288b8><div class="content-container" data-v-39a288b8><!--[--><!--]--><main class="main" data-v-39a288b8><div style="position:relative;" class="vp-doc _interview_concurrency-design-patterns" data-v-39a288b8><div><h1 id="å¹¶å‘è®¾è®¡æ¨¡å¼" tabindex="-1">å¹¶å‘è®¾è®¡æ¨¡å¼ <a class="header-anchor" href="#å¹¶å‘è®¾è®¡æ¨¡å¼" aria-label="Permalink to &quot;å¹¶å‘è®¾è®¡æ¨¡å¼&quot;">â€‹</a></h1><h2 id="ç›®å½•" tabindex="-1">ç›®å½• <a class="header-anchor" href="#ç›®å½•" aria-label="Permalink to &quot;ç›®å½•&quot;">â€‹</a></h2><ul><li><a href="#1-ç”Ÿäº§è€…æ¶ˆè´¹è€…æ¨¡å¼">1. ç”Ÿäº§è€…æ¶ˆè´¹è€…æ¨¡å¼</a></li><li><a href="#2-çº¿ç¨‹æ± æ¨¡å¼">2. çº¿ç¨‹æ± æ¨¡å¼</a></li><li><a href="#3-çº¿ç¨‹æœ¬åœ°å­˜å‚¨threadlocal">3. çº¿ç¨‹æœ¬åœ°å­˜å‚¨ï¼ˆThreadLocalï¼‰</a></li></ul><hr><h2 id="_1-ç”Ÿäº§è€…æ¶ˆè´¹è€…æ¨¡å¼" tabindex="-1">1. ç”Ÿäº§è€…æ¶ˆè´¹è€…æ¨¡å¼ <a class="header-anchor" href="#_1-ç”Ÿäº§è€…æ¶ˆè´¹è€…æ¨¡å¼" aria-label="Permalink to &quot;1. ç”Ÿäº§è€…æ¶ˆè´¹è€…æ¨¡å¼&quot;">â€‹</a></h2><p><strong>å®ç°æ–¹å¼</strong>ï¼š</p><ol><li>ä½¿ç”¨wait/notify</li><li>ä½¿ç”¨BlockingQueueï¼ˆæ¨èï¼‰</li><li>ä½¿ç”¨Lock + Condition</li></ol><h3 id="_1-1-blockingqueueå®ç°-æ¨è" tabindex="-1">1.1 BlockingQueueå®ç°ï¼ˆæ¨èï¼‰ <a class="header-anchor" href="#_1-1-blockingqueueå®ç°-æ¨è" aria-label="Permalink to &quot;1.1 BlockingQueueå®ç°ï¼ˆæ¨èï¼‰&quot;">â€‹</a></h3><div class="language-java vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">java</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">public</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> class</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> ProducerConsumer</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> {</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">    private</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> final</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> BlockingQueue&lt;</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">Integer</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&gt; queue </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> new</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> LinkedBlockingQueue&lt;&gt;(</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">10</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">);</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    </span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">    public</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> void</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> produce</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">() </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">throws</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> InterruptedException {</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">        int</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> value </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> 1</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">;</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">        while</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> (</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">true</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">) {</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">            queue.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">put</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(value);  </span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">// é˜»å¡å¼æ”¾å…¥</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">            System.out.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">println</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;ç”Ÿäº§: &quot;</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> +</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> value);</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">            value</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">++</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">            Thread.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">sleep</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">100</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">);</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">        }</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    }</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    </span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">    public</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> void</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> consume</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">() </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">throws</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> InterruptedException {</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">        while</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> (</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">true</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">) {</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">            Integer value </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> queue.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">take</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">();  </span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">// é˜»å¡å¼å–å‡º</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">            System.out.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">println</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;æ¶ˆè´¹: &quot;</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> +</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> value);</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">            Thread.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">sleep</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">200</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">);</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">        }</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    }</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">}</span></span></code></pre></div><p><strong>é¢è¯•é‡ç‚¹</strong>ï¼š</p><ul><li>ä¸ºä»€ä¹ˆä½¿ç”¨BlockingQueueï¼Ÿ <ul><li>çº¿ç¨‹å®‰å…¨</li><li>è‡ªåŠ¨é˜»å¡å’Œå”¤é†’</li><li>ä»£ç ç®€æ´</li></ul></li></ul><h3 id="_1-2-lock-conditionå®ç°" tabindex="-1">1.2 Lock + Conditionå®ç° <a class="header-anchor" href="#_1-2-lock-conditionå®ç°" aria-label="Permalink to &quot;1.2 Lock + Conditionå®ç°&quot;">â€‹</a></h3><div class="language-java vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">java</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">public</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> class</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> ProducerConsumerWithLock</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> {</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">    private</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> final</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> Lock lock </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> new</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> ReentrantLock</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">();</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">    private</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> final</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> Condition notFull </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> lock.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">newCondition</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">();</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">    private</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> final</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> Condition notEmpty </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> lock.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">newCondition</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">();</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">    private</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> final</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> Queue&lt;</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">Integer</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&gt; queue </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> new</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> LinkedList&lt;&gt;();</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">    private</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> final</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> int</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> MAX_SIZE </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> 10</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    </span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">    public</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> void</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> produce</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">() </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">throws</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> InterruptedException {</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">        lock.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">lock</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">();</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">        try</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> {</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">            while</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> (queue.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">size</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">() </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">==</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> MAX_SIZE) {</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">                notFull.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">await</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">();  </span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">// ç­‰å¾…é˜Ÿåˆ—ä¸æ»¡</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">            }</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">            queue.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">offer</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">1</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">);</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">            notEmpty.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">signal</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">();  </span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">// å”¤é†’æ¶ˆè´¹è€…</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">        } </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">finally</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> {</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">            lock.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">unlock</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">();</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">        }</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    }</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    </span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">    public</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> void</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> consume</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">() </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">throws</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> InterruptedException {</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">        lock.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">lock</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">();</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">        try</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> {</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">            while</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> (queue.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">isEmpty</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">()) {</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">                notEmpty.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">await</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">();  </span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">// ç­‰å¾…é˜Ÿåˆ—ä¸ç©º</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">            }</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">            queue.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">poll</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">();</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">            notFull.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">signal</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">();  </span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">// å”¤é†’ç”Ÿäº§è€…</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">        } </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">finally</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> {</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">            lock.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">unlock</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">();</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">        }</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    }</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">}</span></span></code></pre></div><h3 id="_1-3-wait-notifyå®ç°" tabindex="-1">1.3 wait/notifyå®ç° <a class="header-anchor" href="#_1-3-wait-notifyå®ç°" aria-label="Permalink to &quot;1.3 wait/notifyå®ç°&quot;">â€‹</a></h3><div class="language-java vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">java</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">public</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> class</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> ProducerConsumerWithWaitNotify</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> {</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">    private</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> final</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> Queue&lt;</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">Integer</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&gt; queue </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> new</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> LinkedList&lt;&gt;();</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">    private</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> final</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> int</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> MAX_SIZE </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> 10</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">;</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">    private</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> final</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> Object lock </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> new</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> Object</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">();</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    </span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">    public</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> void</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> produce</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">() </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">throws</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> InterruptedException {</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">        synchronized</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> (lock) {</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">            while</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> (queue.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">size</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">() </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">==</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> MAX_SIZE) {</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">                lock.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">wait</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">();  </span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">// é˜Ÿåˆ—æ»¡ï¼Œç­‰å¾…</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">            }</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">            queue.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">offer</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">1</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">);</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">            lock.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">notifyAll</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">();  </span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">// å”¤é†’æ¶ˆè´¹è€…</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">        }</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    }</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    </span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">    public</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> void</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> consume</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">() </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">throws</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> InterruptedException {</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">        synchronized</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> (lock) {</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">            while</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> (queue.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">isEmpty</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">()) {</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">                lock.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">wait</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">();  </span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">// é˜Ÿåˆ—ç©ºï¼Œç­‰å¾…</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">            }</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">            queue.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">poll</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">();</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">            lock.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">notifyAll</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">();  </span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">// å”¤é†’ç”Ÿäº§è€…</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">        }</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    }</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">}</span></span></code></pre></div><p><strong>ä¸‰ç§å®ç°æ–¹å¼å¯¹æ¯”</strong>ï¼š</p><table tabindex="0"><thead><tr><th>å®ç°æ–¹å¼</th><th>ä¼˜ç‚¹</th><th>ç¼ºç‚¹</th></tr></thead><tbody><tr><td>BlockingQueue</td><td>ä»£ç ç®€æ´ï¼Œçº¿ç¨‹å®‰å…¨</td><td>éœ€è¦é¢å¤–ä¾èµ–</td></tr><tr><td>Lock + Condition</td><td>çµæ´»ï¼Œæ”¯æŒå¤šä¸ªæ¡ä»¶</td><td>ä»£ç è¾ƒå¤æ‚</td></tr><tr><td>wait/notify</td><td>åŸç”Ÿæ”¯æŒ</td><td>å®¹æ˜“å‡ºé”™ï¼Œéœ€è¦æ‰‹åŠ¨ç®¡ç†</td></tr></tbody></table><hr><h2 id="_2-çº¿ç¨‹æ± æ¨¡å¼" tabindex="-1">2. çº¿ç¨‹æ± æ¨¡å¼ <a class="header-anchor" href="#_2-çº¿ç¨‹æ± æ¨¡å¼" aria-label="Permalink to &quot;2. çº¿ç¨‹æ± æ¨¡å¼&quot;">â€‹</a></h2><p><strong>çº¿ç¨‹æ± çš„ä¼˜åŠ¿</strong>ï¼š</p><ul><li>é™ä½èµ„æºæ¶ˆè€—ï¼ˆçº¿ç¨‹åˆ›å»ºå’Œé”€æ¯å¼€é”€å¤§ï¼‰</li><li>æé«˜å“åº”é€Ÿåº¦ï¼ˆä»»åŠ¡åˆ°è¾¾å³å¯æ‰§è¡Œï¼‰</li><li>æé«˜çº¿ç¨‹çš„å¯ç®¡ç†æ€§</li></ul><p><strong>çº¿ç¨‹æ± çš„ä½¿ç”¨</strong>ï¼š</p><div class="language-java vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">java</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">// åˆ›å»ºçº¿ç¨‹æ± </span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">ThreadPoolExecutor executor </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> new</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> ThreadPoolExecutor</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">    5</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">10</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">60L</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, TimeUnit.SECONDS,</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">    new</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> LinkedBlockingQueue&lt;&gt;(</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">100</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">),</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">    new</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> ThreadPoolExecutor.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">CallerRunsPolicy</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">()</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">);</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">// æäº¤ä»»åŠ¡</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">Future&lt;</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">String</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&gt; future </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> executor.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">submit</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(() </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">-&gt;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> {</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">    return</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> &quot;ä»»åŠ¡ç»“æœ&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">});</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">// è·å–ç»“æœ</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">String result </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> future.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">get</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">();</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">// å…³é—­çº¿ç¨‹æ± </span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">executor.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">shutdown</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">();</span></span></code></pre></div><p><strong>çº¿ç¨‹æ± çš„ä½¿ç”¨åœºæ™¯</strong>ï¼š</p><ul><li>é«˜å¹¶å‘ä»»åŠ¡å¤„ç†</li><li>å¼‚æ­¥ä»»åŠ¡æ‰§è¡Œ</li><li>å®šæ—¶ä»»åŠ¡è°ƒåº¦</li><li>èµ„æºæ± ç®¡ç†</li></ul><p><strong>çº¿ç¨‹æ± çš„æœ€ä½³å®è·µ</strong>ï¼š</p><ol><li>æ ¹æ®ä»»åŠ¡ç±»å‹è®¾ç½®åˆé€‚çš„çº¿ç¨‹æ•°</li><li>ä½¿ç”¨æœ‰ç•Œé˜Ÿåˆ—é¿å…OOM</li><li>è‡ªå®šä¹‰æ‹’ç»ç­–ç•¥</li><li>æ­£ç¡®å…³é—­çº¿ç¨‹æ± ï¼ˆshutdown()æˆ–shutdownNow()ï¼‰</li><li>ç›‘æ§çº¿ç¨‹æ± çŠ¶æ€</li></ol><hr><h2 id="_3-çº¿ç¨‹æœ¬åœ°å­˜å‚¨-threadlocal" tabindex="-1">3. çº¿ç¨‹æœ¬åœ°å­˜å‚¨ï¼ˆThreadLocalï¼‰ <a class="header-anchor" href="#_3-çº¿ç¨‹æœ¬åœ°å­˜å‚¨-threadlocal" aria-label="Permalink to &quot;3. çº¿ç¨‹æœ¬åœ°å­˜å‚¨ï¼ˆThreadLocalï¼‰&quot;">â€‹</a></h2><p><strong>æ¦‚å¿µ</strong>ï¼š</p><ul><li>ä¸ºæ¯ä¸ªçº¿ç¨‹æä¾›ç‹¬ç«‹çš„å˜é‡å‰¯æœ¬</li><li>çº¿ç¨‹é—´æ•°æ®éš”ç¦»</li></ul><p><strong>ä½¿ç”¨ç¤ºä¾‹</strong>ï¼š</p><div class="language-java vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">java</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">public</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> class</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> ThreadLocalExample</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> {</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">    private</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> static</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> ThreadLocal&lt;</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">String</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&gt; threadLocal </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> new</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> ThreadLocal&lt;&gt;();</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    </span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">    public</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> void</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> setValue</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(String </span><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;">value</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">) {</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">        threadLocal.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">set</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(value);</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    }</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    </span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">    public</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> String </span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">getValue</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">() {</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">        return</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> threadLocal.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">get</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">();</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    }</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    </span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">    public</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> void</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> remove</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">() {</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">        threadLocal.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">remove</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">();  </span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">// é˜²æ­¢å†…å­˜æ³„æ¼</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    }</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">}</span></span></code></pre></div><p><strong>å®ç°åŸç†</strong>ï¼š</p><ul><li>æ¯ä¸ªThreadç»´æŠ¤ä¸€ä¸ªThreadLocalMap</li><li>ThreadLocalä½œä¸ºkeyï¼Œå­˜å‚¨çš„å€¼ä½œä¸ºvalue</li><li>ä½¿ç”¨å¼±å¼•ç”¨é¿å…å†…å­˜æ³„æ¼</li></ul><p><strong>ThreadLocalMapç»“æ„</strong>ï¼š</p><div class="language-java vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">java</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">static</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> class</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> ThreadLocalMap</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> {</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">    static</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> class</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> Entry</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> extends</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> WeakReference</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&lt;ThreadLocal&lt;</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">?</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&gt;&gt; {</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">        Object value;</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">        Entry</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(ThreadLocal&lt;</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">?</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&gt; </span><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;">k</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, Object </span><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;">v</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">) {</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">            super</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(k);</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">            value </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> v;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">        }</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    }</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">}</span></span></code></pre></div><p><strong>é¢è¯•é‡ç‚¹</strong>ï¼š</p><ul><li>ThreadLocalçš„å†…å­˜æ³„æ¼é—®é¢˜ <ul><li>åŸå› ï¼šThreadLocalMapçš„keyæ˜¯å¼±å¼•ç”¨ï¼Œvalueæ˜¯å¼ºå¼•ç”¨</li><li>å¦‚æœThreadLocalè¢«å›æ”¶ï¼Œkeyå˜ä¸ºnullï¼Œä½†valueä»ç„¶å­˜åœ¨</li><li>è§£å†³ï¼šä½¿ç”¨å®Œè°ƒç”¨<code>remove()</code>æ–¹æ³•</li></ul></li><li>ThreadLocalçš„ä½¿ç”¨åœºæ™¯ <ul><li>ç”¨æˆ·ä¿¡æ¯å­˜å‚¨ï¼ˆSpringçš„RequestContextHolderï¼‰</li><li>æ•°æ®åº“è¿æ¥ç®¡ç†</li><li>æ—¥æœŸæ ¼å¼åŒ–ï¼ˆSimpleDateFormatçº¿ç¨‹ä¸å®‰å…¨ï¼‰</li><li>äº‹åŠ¡ç®¡ç†</li></ul></li></ul><p><strong>å†…å­˜æ³„æ¼ç¤ºä¾‹</strong>ï¼š</p><div class="language-java vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">java</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">public</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> class</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> ThreadLocalMemoryLeak</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> {</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">    private</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> static</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> ThreadLocal&lt;</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">BigObject</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&gt; threadLocal </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> new</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> ThreadLocal&lt;&gt;();</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    </span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">    public</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> void</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> method</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">() {</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">        threadLocal.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">set</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">new</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> BigObject</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">());</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">        // å¿˜è®°è°ƒç”¨remove()ï¼Œå¯¼è‡´å†…å­˜æ³„æ¼</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">        // ThreadLocalè¢«å›æ”¶åï¼Œvalueä»ç„¶å­˜åœ¨ï¼Œæ— æ³•è¢«GC</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    }</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">}</span></span></code></pre></div><p><strong>æ­£ç¡®ä½¿ç”¨æ–¹å¼</strong>ï¼š</p><div class="language-java vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">java</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">public</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> void</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> method</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">() {</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">    try</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> {</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">        threadLocal.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">set</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">new</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> BigObject</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">());</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">        // ä½¿ç”¨threadLocal</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    } </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">finally</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> {</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">        threadLocal.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">remove</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">();  </span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">// å¿…é¡»æ¸…ç†</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    }</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">}</span></span></code></pre></div><p><strong>InheritableThreadLocal</strong>ï¼š</p><ul><li>å­çº¿ç¨‹å¯ä»¥ç»§æ‰¿çˆ¶çº¿ç¨‹çš„ThreadLocalå€¼</li><li>ä½¿ç”¨åœºæ™¯ï¼šéœ€è¦åœ¨å­çº¿ç¨‹ä¸­ä½¿ç”¨çˆ¶çº¿ç¨‹çš„ä¸Šä¸‹æ–‡ä¿¡æ¯</li></ul><div class="language-java vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">java</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">public</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> class</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> InheritableThreadLocalExample</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> {</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">    private</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> static</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> InheritableThreadLocal&lt;</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">String</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&gt; threadLocal </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> </span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">        new</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> InheritableThreadLocal&lt;&gt;();</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    </span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">    public</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> static</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> void</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> main</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">String</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">[] </span><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;">args</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">) {</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">        threadLocal.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">set</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;çˆ¶çº¿ç¨‹çš„å€¼&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">);</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">        </span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">        new</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> Thread</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(() </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">-&gt;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> {</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">            System.out.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">println</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;å­çº¿ç¨‹è·å–: &quot;</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> +</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> threadLocal.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">get</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">());  </span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">// å¯ä»¥è·å–çˆ¶çº¿ç¨‹çš„å€¼</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">        }).</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">start</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">();</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    }</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">}</span></span></code></pre></div><p><strong>ThreadLocalåœ¨Springä¸­çš„åº”ç”¨</strong>ï¼š</p><div class="language-java vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">java</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">// Springçš„RequestContextHolderä½¿ç”¨ThreadLocalå­˜å‚¨è¯·æ±‚ä¸Šä¸‹æ–‡</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">public</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> abstract</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> class</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> RequestContextHolder</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> {</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">    private</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> static</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> final</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> ThreadLocal&lt;</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">RequestAttributes</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&gt; requestAttributesHolder </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> </span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">        new</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> NamedThreadLocal&lt;&gt;(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;Request attributes&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">);</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    </span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">    public</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> static</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> RequestAttributes </span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">getRequestAttributes</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">() {</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">        return</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> requestAttributesHolder.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">get</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">();</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    }</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    </span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">    public</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> static</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> void</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> setRequestAttributes</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(RequestAttributes </span><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;">attributes</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">) {</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">        requestAttributesHolder.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">set</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(attributes);</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    }</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    </span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">    public</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> static</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> void</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> resetRequestAttributes</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">() {</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">        requestAttributesHolder.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">remove</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">();</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    }</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">}</span></span></code></pre></div><hr><h2 id="é¢è¯•å¸¸è§é—®é¢˜" tabindex="-1">é¢è¯•å¸¸è§é—®é¢˜ <a class="header-anchor" href="#é¢è¯•å¸¸è§é—®é¢˜" aria-label="Permalink to &quot;é¢è¯•å¸¸è§é—®é¢˜&quot;">â€‹</a></h2><ol><li><p><strong>ThreadLocalçš„å†…å­˜æ³„æ¼é—®é¢˜</strong></p><ul><li>ä½¿ç”¨å®Œå¿…é¡»è°ƒç”¨remove()</li><li>ThreadLocalMapçš„keyæ˜¯å¼±å¼•ç”¨ï¼Œvalueæ˜¯å¼ºå¼•ç”¨</li></ul></li><li><p><strong>å¦‚ä½•å®ç°çº¿ç¨‹å®‰å…¨çš„å•ä¾‹ï¼Ÿ</strong></p><ul><li>åŒé‡æ£€æŸ¥é”å®š</li><li>é™æ€å†…éƒ¨ç±»</li><li>æšä¸¾</li></ul></li><li><p><strong>ç”Ÿäº§è€…æ¶ˆè´¹è€…æ¨¡å¼çš„å®ç°æ–¹å¼</strong></p><ul><li>BlockingQueueï¼ˆæ¨èï¼‰</li><li>Lock + Condition</li><li>wait/notify</li></ul></li><li><p><strong>çº¿ç¨‹æ± çš„ä½¿ç”¨åœºæ™¯</strong></p><ul><li>é«˜å¹¶å‘ä»»åŠ¡å¤„ç†</li><li>å¼‚æ­¥ä»»åŠ¡æ‰§è¡Œ</li><li>å®šæ—¶ä»»åŠ¡è°ƒåº¦</li></ul></li></ol><hr><h2 id="å­¦ä¹ å»ºè®®" tabindex="-1">å­¦ä¹ å»ºè®® <a class="header-anchor" href="#å­¦ä¹ å»ºè®®" aria-label="Permalink to &quot;å­¦ä¹ å»ºè®®&quot;">â€‹</a></h2><ol><li><strong>ç†è§£åŸç†</strong>ï¼šæ·±å…¥ç†è§£ThreadLocalçš„å®ç°åŸç†å’Œå†…å­˜æ³„æ¼é—®é¢˜</li><li><strong>åŠ¨æ‰‹å®è·µ</strong>ï¼šå®ç°ç”Ÿäº§è€…æ¶ˆè´¹è€…æ¨¡å¼ï¼Œç†è§£ä¸åŒå®ç°æ–¹å¼çš„ä¼˜ç¼ºç‚¹</li><li><strong>é˜…è¯»æºç </strong>ï¼šé˜…è¯»ThreadLocalå’Œçº¿ç¨‹æ± çš„æºç </li><li><strong>æœ€ä½³å®è·µ</strong>ï¼šæŒæ¡ThreadLocalçš„æ­£ç¡®ä½¿ç”¨æ–¹å¼ï¼Œé¿å…å†…å­˜æ³„æ¼</li></ol><hr><p><em>æœ€åæ›´æ–°æ—¶é—´ï¼š2024å¹´</em></p></div></div></main><footer class="VPDocFooter" data-v-39a288b8 data-v-e257564d><!--[--><!--]--><div class="edit-info" data-v-e257564d><!----><div class="last-updated" data-v-e257564d><p class="VPLastUpdated" data-v-e257564d data-v-e98dd255>æœ€åæ›´æ–°: <time datetime="2026-01-10T13:18:06.000Z" data-v-e98dd255></time></p></div></div><nav class="prev-next" aria-labelledby="doc-footer-aria-label" data-v-e257564d><span class="visually-hidden" id="doc-footer-aria-label" data-v-e257564d>Pager</span><div class="pager" data-v-e257564d><a class="VPLink link pager-link prev" href="/interview/concurrency-juc.html" data-v-e257564d><!--[--><span class="desc" data-v-e257564d>Previous page</span><span class="title" data-v-e257564d>JUCåŒ…</span><!--]--></a></div><div class="pager" data-v-e257564d><a class="VPLink link pager-link next" href="/interview/jvm-basics.html" data-v-e257564d><!--[--><span class="desc" data-v-e257564d>Next page</span><span class="title" data-v-e257564d>å†…å­˜æ¨¡å‹ã€GCä¸ç±»åŠ è½½</span><!--]--></a></div></nav></footer><!--[--><!--]--></div></div></div><!--[--><!--]--></div></div><footer class="VPFooter has-sidebar" data-v-5d98c3a5 data-v-e315a0ad><div class="container" data-v-e315a0ad><p class="message" data-v-e315a0ad>Released under the MIT License.</p><p class="copyright" data-v-e315a0ad>Copyright Â© 2025-present Wang</p></div></footer><!--[--><!--]--></div></div>
    <script>window.__VP_HASH_MAP__=JSON.parse("{\"30-day-algorithm_day01.md\":\"DJlrTW85\",\"30-day-algorithm_day02.md\":\"Dt6lz8Fc\",\"30-day-algorithm_day03.md\":\"C8CYYJN2\",\"30-day-algorithm_day04.md\":\"CIafvmGo\",\"30-day-algorithm_day05.md\":\"DDb39CdP\",\"30-day-algorithm_day06.md\":\"CphoMELq\",\"30-day-algorithm_day07.md\":\"idyOgveA\",\"30-day-algorithm_day08.md\":\"BqP5nt1Z\",\"30-day-algorithm_day09.md\":\"BWOTMfA1\",\"30-day-algorithm_day10.md\":\"DZl33HJS\",\"30-day-algorithm_day11.md\":\"BPzMhiw7\",\"30-day-algorithm_day12.md\":\"Boct6D98\",\"30-day-algorithm_day13.md\":\"DGn8ZlF-\",\"30-day-algorithm_day14.md\":\"C-SHPLdV\",\"30-day-algorithm_day15.md\":\"Cz7nTGRC\",\"30-day-algorithm_day16.md\":\"BDGPC0op\",\"30-day-algorithm_day17.md\":\"WhzXDkqg\",\"30-day-algorithm_day18.md\":\"DEG6_584\",\"30-day-algorithm_index.md\":\"CrOrYqZ7\",\"about.md\":\"D0LY0p4H\",\"ai_index.md\":\"AzYtRydo\",\"ai_latest-developments.md\":\"CjHBs9rD\",\"ai_living-files-theory.md\":\"BRQ0Nv0V\",\"ai_openclaw-memory-architecture.md\":\"BGeHzlKh\",\"ai_prompt-engineering.md\":\"BedomlbR\",\"ai_vector-embedding.md\":\"DM0LQQU-\",\"index.md\":\"v22f_hT9\",\"interview_concurrency-design-patterns.md\":\"DxnsdowV\",\"interview_concurrency-juc.md\":\"Dpr9oUf7\",\"interview_concurrency-thread-basics.md\":\"DJJkg0TL\",\"interview_index.md\":\"qAARLP1_\",\"interview_java-basics-collections.md\":\"VpI_8GVN\",\"interview_java-basics-io-nio.md\":\"Du0H0EyS\",\"interview_java-basics-language-features.md\":\"DClYFwOc\",\"interview_java-interview-outline.md\":\"BAXZvNfl\",\"interview_jvm-basics.md\":\"XtJLWO_P\",\"others_base64-explanation.md\":\"BVHwGglv\",\"others_binary_addition.md\":\"1i4EhbLF\",\"others_cosine.md\":\"BaYaNYiv\",\"others_dp.md\":\"CfuxKDds\",\"others_index.md\":\"BKpa52X1\",\"others_leetcode100.md\":\"Chr2TmaZ\",\"others_mcp.md\":\"BD2BPzED\",\"others_mysql.md\":\"3QV6-5YP\",\"others_quick-sort-java.md\":\"C4XHVTcv\",\"others_slow-sql-governance.md\":\"THd8EZjV\",\"others_sort.md\":\"dd-WI5oX\",\"others_sword-offer.md\":\"0z7bU_J4\",\"others_unionfind.md\":\"CbF-D-h6\"}");window.__VP_SITE_DATA__=JSON.parse("{\"lang\":\"zh-CN\",\"dir\":\"ltr\",\"title\":\"Yabin's Tech Journey\",\"description\":\"ç®—æ³•ã€javaã€AI\",\"base\":\"/\",\"head\":[],\"router\":{\"prefetchLinks\":true},\"appearance\":false,\"themeConfig\":{\"siteTitle\":\"Yabin's Tech Journey\",\"nav\":[{\"text\":\"ğŸš€ 30å¤©åˆ·é¢˜è®¡åˆ’\",\"link\":\"/30-day-algorithm/\"},{\"text\":\"â˜• Java é¢è¯•\",\"link\":\"/interview/\"},{\"text\":\"ğŸ¤– AI æ¢ç´¢\",\"link\":\"/ai/\"},{\"text\":\"ğŸ“ å…¶ä»–æ–‡ç« \",\"link\":\"/others/\"}],\"sidebar\":{\"/30-day-algorithm/\":{\"base\":\"/30-day-algorithm/\",\"items\":[{\"text\":\"Day 1 - æ•°ç»„\",\"link\":\"day01\"},{\"text\":\"Day 2 - æ•°ç»„è¿›é˜¶\",\"link\":\"day02\"},{\"text\":\"Day 3 - é“¾è¡¨ä¸“é¢˜\",\"link\":\"day03\"},{\"text\":\"Day 4 - é“¾è¡¨è¿›é˜¶\",\"link\":\"day04\"},{\"text\":\"Day 5 - å“ˆå¸Œè¡¨åŸºç¡€\",\"link\":\"day05\"},{\"text\":\"Day 6 - å“ˆå¸Œè¡¨è¿›é˜¶\",\"link\":\"day06\"},{\"text\":\"Day 7 - å­—ç¬¦ä¸²åŸºç¡€\",\"link\":\"day07\"},{\"text\":\"Day 8 - å­—ç¬¦ä¸²è¿›é˜¶\",\"link\":\"day08\"},{\"text\":\"Day 9 - åŒæŒ‡é’ˆåŸºç¡€\",\"link\":\"day09\"},{\"text\":\"Day 10 - åŒæŒ‡é’ˆè¿›é˜¶\",\"link\":\"day10\"},{\"text\":\"Day 11 - æ»‘åŠ¨çª—å£åŸºç¡€\",\"link\":\"day11\"},{\"text\":\"Day 12 - æ»‘åŠ¨çª—å£è¿›é˜¶\",\"link\":\"day12\"},{\"text\":\"Day 13 - æ ˆ\",\"link\":\"day13\"},{\"text\":\"Day 14 - é˜Ÿåˆ—\",\"link\":\"day14\"},{\"text\":\"Day 15 - äºŒå‰æ ‘\",\"link\":\"day15\"},{\"text\":\"Day 16 - äºŒå‰æ ‘\",\"link\":\"day16\"},{\"text\":\"Day 17 - äºŒå‰æ ‘\",\"link\":\"day17\"},{\"text\":\"Day 18 - äºŒå‰æœç´¢æ ‘\",\"link\":\"day18\"}]},\"/interview/\":[{\"text\":\"Javaç¨‹åºå‘˜é¢è¯•å­¦ä¹ å¤§çº²\",\"link\":\"/interview/java-interview-outline\"},{\"text\":\"â˜• Java é¢è¯•å­¦ä¹ \",\"link\":\"/interview/\"},{\"text\":\"JavaåŸºç¡€\",\"collapsed\":false,\"items\":[{\"text\":\"è¯­è¨€ç‰¹æ€§\",\"link\":\"/interview/java-basics-language-features\"},{\"text\":\"é›†åˆæ¡†æ¶\",\"link\":\"/interview/java-basics-collections\"},{\"text\":\"IO/NIO\",\"link\":\"/interview/java-basics-io-nio\"}]},{\"text\":\"å¹¶å‘ç¼–ç¨‹\",\"collapsed\":false,\"items\":[{\"text\":\"çº¿ç¨‹åŸºç¡€\",\"link\":\"/interview/concurrency-thread-basics\"},{\"text\":\"JUCåŒ…\",\"link\":\"/interview/concurrency-juc\"},{\"text\":\"å¹¶å‘è®¾è®¡æ¨¡å¼\",\"link\":\"/interview/concurrency-design-patterns\"}]},{\"text\":\"JVM\",\"collapsed\":false,\"items\":[{\"text\":\"å†…å­˜æ¨¡å‹ã€GCä¸ç±»åŠ è½½\",\"link\":\"/interview/jvm-basics\"}]}],\"/ai/\":{\"base\":\"/ai/\",\"items\":[{\"text\":\"AI æœ€æ–°è¿›å±•\",\"link\":\"latest-developments\"},{\"text\":\"å¤§æ¨¡å‹ä¸­çš„å‘é‡åµŒå…¥ï¼ˆVector Embeddingï¼‰\",\"link\":\"vector-embedding\"},{\"text\":\"Prompt å·¥ç¨‹ï¼šå¤§è¯­è¨€æ¨¡å‹äº¤äº’çš„è‰ºæœ¯\",\"link\":\"prompt-engineering\"},{\"text\":\"æ´»æ–‡ä»¶ç†è®º (The \\\"Living Files\\\" Theory)\",\"link\":\"living-files-theory\"},{\"text\":\"ğŸ§  OpenClaw è®°å¿†ç³»ç»Ÿæ¶æ„\",\"link\":\"openclaw-memory-architecture\"}]},\"/others/\":{\"base\":\"/others/\",\"items\":[{\"text\":\"Base64 ç¼–ç è¯¦è§£\",\"link\":\"base64-explanation\"},{\"text\":\"äºŒè¿›åˆ¶åŠ æ³•ç®—æ³•\",\"link\":\"binary_addition\"},{\"text\":\"ä½™å¼¦ç›¸ä¼¼åº¦\",\"link\":\"cosine\"},{\"text\":\"åŠ¨æ€è§„åˆ’\",\"link\":\"dp\"},{\"text\":\"100 é“ LeetCode ç®—æ³•é¢˜\",\"link\":\"leetCode100\"},{\"text\":\"MCPï¼ˆæ¨¡å‹ä¸Šä¸‹æ–‡åè®®ï¼‰è¯¦è§£\",\"link\":\"mcp\"},{\"text\":\"Innodbæ˜¯å¦‚ä½•å®ç°äº‹åŠ¡çš„\",\"link\":\"mysql\"},{\"text\":\"å¿«é€Ÿæ’åºç®—æ³• - Javaå®ç°\",\"link\":\"quick-sort-java\"},{\"text\":\"æ…¢SQLæ²»ç†æ€»ç»“\",\"link\":\"slow-sql-governance\"},{\"text\":\"sort\",\"link\":\"sort\"},{\"text\":\"å‰‘æŒ‡Offerç®—æ³•å­¦ä¹ ç¬”è®°\",\"link\":\"sword-offer\"},{\"text\":\"å¹¶æŸ¥é›†(Disjoint Set Union)\",\"link\":\"unionFind\"}]},\"/interview\":[{\"text\":\"Javaç¨‹åºå‘˜é¢è¯•å­¦ä¹ å¤§çº²\",\"link\":\"/interview/java-interview-outline\"},{\"text\":\"â˜• Java é¢è¯•å­¦ä¹ \",\"link\":\"/interview/\"},{\"text\":\"JavaåŸºç¡€\",\"collapsed\":false,\"items\":[{\"text\":\"è¯­è¨€ç‰¹æ€§\",\"link\":\"/interview/java-basics-language-features\"},{\"text\":\"é›†åˆæ¡†æ¶\",\"link\":\"/interview/java-basics-collections\"},{\"text\":\"IO/NIO\",\"link\":\"/interview/java-basics-io-nio\"}]},{\"text\":\"å¹¶å‘ç¼–ç¨‹\",\"collapsed\":false,\"items\":[{\"text\":\"çº¿ç¨‹åŸºç¡€\",\"link\":\"/interview/concurrency-thread-basics\"},{\"text\":\"JUCåŒ…\",\"link\":\"/interview/concurrency-juc\"},{\"text\":\"å¹¶å‘è®¾è®¡æ¨¡å¼\",\"link\":\"/interview/concurrency-design-patterns\"}]},{\"text\":\"JVM\",\"collapsed\":false,\"items\":[{\"text\":\"å†…å­˜æ¨¡å‹ã€GCä¸ç±»åŠ è½½\",\"link\":\"/interview/jvm-basics\"}]}],\"/ai\":{\"base\":\"/ai/\",\"items\":[{\"text\":\"AI æœ€æ–°è¿›å±•\",\"link\":\"latest-developments\"},{\"text\":\"å¤§æ¨¡å‹ä¸­çš„å‘é‡åµŒå…¥ï¼ˆVector Embeddingï¼‰\",\"link\":\"vector-embedding\"},{\"text\":\"Prompt å·¥ç¨‹ï¼šå¤§è¯­è¨€æ¨¡å‹äº¤äº’çš„è‰ºæœ¯\",\"link\":\"prompt-engineering\"},{\"text\":\"æ´»æ–‡ä»¶ç†è®º (The \\\"Living Files\\\" Theory)\",\"link\":\"living-files-theory\"},{\"text\":\"ğŸ§  OpenClaw è®°å¿†ç³»ç»Ÿæ¶æ„\",\"link\":\"openclaw-memory-architecture\"}]},\"/others\":{\"base\":\"/others/\",\"items\":[{\"text\":\"Base64 ç¼–ç è¯¦è§£\",\"link\":\"base64-explanation\"},{\"text\":\"äºŒè¿›åˆ¶åŠ æ³•ç®—æ³•\",\"link\":\"binary_addition\"},{\"text\":\"ä½™å¼¦ç›¸ä¼¼åº¦\",\"link\":\"cosine\"},{\"text\":\"åŠ¨æ€è§„åˆ’\",\"link\":\"dp\"},{\"text\":\"100 é“ LeetCode ç®—æ³•é¢˜\",\"link\":\"leetCode100\"},{\"text\":\"MCPï¼ˆæ¨¡å‹ä¸Šä¸‹æ–‡åè®®ï¼‰è¯¦è§£\",\"link\":\"mcp\"},{\"text\":\"Innodbæ˜¯å¦‚ä½•å®ç°äº‹åŠ¡çš„\",\"link\":\"mysql\"},{\"text\":\"å¿«é€Ÿæ’åºç®—æ³• - Javaå®ç°\",\"link\":\"quick-sort-java\"},{\"text\":\"æ…¢SQLæ²»ç†æ€»ç»“\",\"link\":\"slow-sql-governance\"},{\"text\":\"sort\",\"link\":\"sort\"},{\"text\":\"å‰‘æŒ‡Offerç®—æ³•å­¦ä¹ ç¬”è®°\",\"link\":\"sword-offer\"},{\"text\":\"å¹¶æŸ¥é›†(Disjoint Set Union)\",\"link\":\"unionFind\"}]}},\"socialLinks\":[{\"icon\":\"github\",\"link\":\"https://github.com/yabwang\"}],\"search\":{\"provider\":\"local\"},\"lastUpdated\":{\"text\":\"æœ€åæ›´æ–°\"},\"footer\":{\"message\":\"Released under the MIT License.\",\"copyright\":\"Copyright Â© 2025-present Wang\"},\"outline\":{\"level\":[2,3],\"label\":\"ç›®å½•\"}},\"locales\":{},\"scrollOffset\":134,\"cleanUrls\":false}");</script>
    
  </body>
</html>